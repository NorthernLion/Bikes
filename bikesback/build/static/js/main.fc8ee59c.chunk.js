(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{205:function(e,n,t){e.exports=t(357)},357:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(33),i=t.n(o),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var u=t(85),s=t(86),d=t(93),p=t(88),f=t(94),m=t(44),g=t(54),h=t(368),v=t(37),w=t.n(v),b=t(62),E=t(124),y={},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOGIN_SUCCESS":return n.response;case"LOGIN_FAILURE":return{};case"LOGIN_BYTOKEN":return n.user;case"LOGOUT_SUCCESS":return{};case"USER_UPDATE_SUCCESS":return Object(E.a)({},e,{user:Object(E.a)({},e.user,{email:n.response.email})});default:return e}},k=t(66),S=t.n(k);var j=function(e){return function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"get";return function(a){var o={route:e,method:r,data:t,prefix:n};a({type:"".concat(n,"ATTEMPT"),payload:o})}}("api/login","LOGIN_",e,"post")},L=t(366),C=t(370),U=t(369),x=t(367),A=t(358),N=t(116),T=t(117);function I(){var e=Object(N.a)(["\n  margin: 0.25em;\n"]);return I=function(){return e},e}function P(){var e=Object(N.a)(["\n  background: Bisque;\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid Chocolate;\n  border-radius: 3px;\n"]);return P=function(){return e},e}T.a.button(P()),T.a.input(I());var R=function(e){function n(){var e,t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(p.a)(n)).call.apply(e,[this].concat(a)))).handleSubmit=function(){var e=Object(b.a)(w.a.mark(function e(n){var r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={username:n.target.username.value,password:n.target.password.value},e.next=4,t.props.login(r);case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t}return Object(f.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"LoginPage"},a.a.createElement(L.a,{active:this.props.loading.loading,inline:"centered"}),a.a.createElement(C.a,null,a.a.createElement(C.a.Row,{centered:!0},a.a.createElement("h3",null,"Enter your University of Helsinki username and password"))),a.a.createElement(C.a,null,a.a.createElement(C.a.Row,{centered:!0},a.a.createElement(U.a,{onSubmit:this.handleSubmit},a.a.createElement(U.a.Group,{inline:!0},a.a.createElement("label",{style:{width:"75px"}},"Username"),a.a.createElement(x.a,{type:"text",name:"username",icon:"user",required:"true",iconPosition:"left",style:{minWidth:"25em"},placeholder:"Your AD-username",className:"form-control1"})),a.a.createElement(U.a.Group,{inline:!0},a.a.createElement("label",{style:{width:"75px"}},"Password"),a.a.createElement(x.a,{type:"password",name:"password",required:"true",icon:"lock",iconPosition:"left",style:{minWidth:"25em"},placeholder:"Your password",className:"form-control2"})),a.a.createElement(U.a.Group,null,a.a.createElement(A.a,{type:"submit",color:"blue"},"Login"))))))}}]),n}(a.a.Component),W={login:j},G=Object(g.b)(function(e){return{user:e.user,loading:e.loading}},W)(R),_=function(e){function n(){return Object(u.a)(this,n),Object(d.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){try{var e=window.localStorage.getItem("bikesLogger");if(e&&"{}"!==e){var n=JSON.parse(e);this.props.tokenLogin(n)}}catch(t){console.log(t)}}},{key:"componentWillReceiveProps",value:function(e){var n={user:e.user,token:e.token,created:e.created};window.localStorage.setItem("bikesLogger",JSON.stringify(n))}},{key:"render",value:function(){var e=this,n=function(){return a.a.createElement("main",null,a.a.createElement(m.c,null,a.a.createElement(m.a,{path:"/",render:function(){return a.a.createElement(G,null)}})))};return a.a.createElement(h.a,null,a.a.createElement("div",null,!0===e.props.loading?a.a.createElement("p",null,"loading lol"):a.a.createElement(n,null)))}}]),n}(r.Component),B=Object(m.e)(Object(g.b)(function(e){return{user:e.user.user,token:e.user.token,loading:e.loading.loading}},{tokenLogin:function(e){return function(){var n=Object(b.a)(w.a.mark(function n(t){return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"LOGIN_BYTOKEN",user:e});case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}})(_)),D=t(114),J=t(42),M=t(191),Y=t(192),q={loading:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=arguments.length>1?arguments[1]:void 0;return n.type.includes("ATTEMPT")?{loading:!0}:n.type.includes("SUCCESS")?{loading:!1}:n.type.includes("FAILURE")?{loading:!1}:(n.type,e)},z=Object(J.combineReducers)({user:O,loading:F}),K=Object(J.createStore)(z,Object(Y.composeWithDevTools)(Object(J.applyMiddleware)(M.a,function(e){return function(n){return function(t){n(t);var r=t.payload;r&&function(e,n,t,r,a){var o={headers:{Authorization:"bearer ".concat(a)}};switch(n){case"get":return S.a.get(e,o);case"post":return S.a.post(e,t,o);case"put":return S.a.put(e,t,o);case"delete":return S.a.delete(e,o);default:return Promise.reject(new Error("Invalid http method"))}}(r.route,r.method,r.data,r.prefix,e.getState().user.token).then(function(n){e.dispatch({type:"".concat(r.prefix,"SUCCESS"),response:n.data})}).catch(function(n){return e.dispatch({type:"".concat(r.prefix,"FAILURE"),response:n})})}}})));i.a.render(a.a.createElement(g.a,{store:K},a.a.createElement(D.a,null,a.a.createElement(B,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("","/service-worker.js");c?(function(e,n){fetch(e).then(function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):l(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):l(n,e)})}}()}},[[205,1,2]]]);
//# sourceMappingURL=main.fc8ee59c.chunk.js.map